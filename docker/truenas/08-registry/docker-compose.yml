---
# yaml-language-server: $schema=https://raw.githubusercontent.com/compose-spec/compose-spec/refs/heads/main/schema/compose-spec.json
services:
  registry:
    image: docker.io/registry:3.0.0@sha256:6c5666b861f3505b116bb9aa9b25175e71210414bd010d92035ff64018f9457e
    container_name: registry
    restart: unless-stopped
    networks:
      apps:
    environment:
      TZ: Europe/Warsaw
    expose:
      - ${APP_PORT}
    volumes:
      - ${REGISTRY_DATA_PATH}:/var/lib/registry
    labels:
      traefik.enable: "true"
      traefik.http.services.registry.loadbalancer.server.port: ${APP_PORT}
      traefik.http.routers.registry.entrypoints: https
      traefik.http.routers.registry.rule: Host(`${HOST}`)
      traefik.http.routers.registry.tls: true
      traefik.http.routers.registry.service: registry

networks:
  apps:
    external: true
