---
# yaml-language-server: $schema=https://crd.movishell.pl/gateway.networking.k8s.io/httproute_v1.json
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: cdn-proxy
spec:
  hostnames: ["${HOSTNAME}"]
  parentRefs:
    - name: envoy-external
      namespace: network
      sectionName: https
  rules:
    - backendRefs:
        - kind: Service
          name: cdn-proxy
          port: 443
      matches:
        - path:
            type: PathPrefix
            value: /
      # filters:
      #   - type: RequestHeaderModifier
      #     responseHeaderModifier:
      #       remove:
      #         - Set-Cookie
